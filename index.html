<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Down Detector</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; font-size: 1.3em; }
        .status-container { display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .status-box { 
            display: flex; 
            align-items: center; 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.1);
            width: 90%;
            justify-content: space-between;
        }
        .status-name { font-weight: bold; font-size: 1.3em; }
        .status-indicator { display: flex; gap: 10px; }
        .square { width: 30px; height: 30px; border-radius: 4px; background-color: lightgray; }
        .ok { background-color: green; }
        .slow { background-color: orange; }
        .down { background-color: red; }
        .status-label { 
            padding: 10px 15px; 
            border-radius: 20px; 
            font-size: 1.3em; 
            font-weight: bold;
            color: white;
        }
        .operational { background-color: #4CAF50; }
        .issues { background-color: #FFA500; }
        .outage { background-color: #FF0000; }
    </style>
</head>
<body>
    <h1>Down Detector</h1>
    <div id="statusContainer" class="status-container"></div>
    
    <script>
        const websites = [
            { name: "Updates", url: "https://github.com/czmenz/", history: new Array(6).fill('empty') },
            { name: "Microsoft", url: "https://www.microsoft.com/cs-cz/software-download/windows11", history: new Array(6).fill('empty') },
            { name: "Github", url: "https://github.com/", history: new Array(6).fill('empty') }
        ];
        
        function checkWebsite(website) {
            fetch(website.url, { mode: 'no-cors' })
                .then(() => updateStatus(website, 'ok'))
                .catch(() => updateStatus(website, 'down'));
        }
        
        function updateStatus(website, statusClass) {
            website.history.shift();
            website.history.push(statusClass);
            renderStatus();
        }
        
        function renderStatus() {
            let statusContainer = document.getElementById("statusContainer");
            statusContainer.innerHTML = "";
            
            websites.forEach(website => {
                let box = document.createElement("div");
                box.className = "status-box";
                
                let nameSpan = document.createElement("div");
                nameSpan.className = "status-name";
                nameSpan.innerText = website.name;
                box.appendChild(nameSpan);
                
                let grid = document.createElement("div");
                grid.className = "status-indicator";
                
                website.history.forEach(status => {
                    let square = document.createElement("div");
                    square.className = `square ${status !== 'empty' ? status : ''}`;
                    grid.appendChild(square);
                });
                
                let lastStatus = website.history.findLast(s => s !== 'empty') || 'ok';
                let statusLabel = document.createElement("div");
                statusLabel.className = `status-label ${lastStatus === 'ok' ? 'operational' : lastStatus === 'slow' ? 'issues' : 'outage'}`;
                statusLabel.innerText = lastStatus === 'ok' ? "Operational" : lastStatus === 'slow' ? "Issues" : "Outage";
                
                box.appendChild(grid);
                box.appendChild(statusLabel);
                statusContainer.appendChild(box);
            });
        }
        
        function checkAllWebsites() {
            websites.forEach(checkWebsite);
        }
        
        checkAllWebsites();
        setInterval(checkAllWebsites, 600000); 
    </script>
</body>
</html>
